<script>
  let VistaActual = "";

// ********************************* [ Eventos ]*******************************
 // Boton Subir
 window.addEventListener("scroll",function(){
   if(this.window.scrollY > 500){
     document.getElementById("btnGoUp").style.transform = "scale(1)";
   }
   if(this.window.scrollY < 500){
     document.getElementById("btnGoUp").style.transform = "scale(0)";
   }
 });
  
  // Cargar imagen
  document.getElementById("imagen").addEventListener("change", function(){
    document.getElementById("imgForm").src = URL.createObjectURL(this.files[0]);
  })

  // Dragover
  document.getElementById("imgForm").addEventListener("dragover", function(event){
    event.preventDefault();
    this.style.filter = "opacity(0%)";
    // document.getElementById("cajaIconoForm").style.display = "flex";
    document.getElementById("lottieForm").style.display = "flex";
  });

  // Dragleave
  document.getElementById("imgForm").addEventListener("dragleave", function(event){
    this.style.filter = "opacity(100%)";
    // document.getElementById("cajaIconoForm").style.display = "none";
    document.getElementById("lottieForm").style.display = "none";
  });

  // Drop
  document.getElementById("imgForm").addEventListener("drop", function(event){
    event.preventDefault();
    let archivos = event.dataTransfer.files;
    // Paso los archivos al input
    document.getElementById("imagen").files = archivos;
    // Muestro la imagen
    document.getElementById("imgForm").src = URL.createObjectURL(archivos[0]);
    this.style.filter = "opacity(100%)";
    // document.getElementById("cajaIconoForm").style.display = "none";
    document.getElementById("lottieForm").style.display = "none";
  });

// ********************************* [ Copiar al portapapeles ]*******************************

// Copiar correo al portapapeles
  document.getElementById("copiarCorreo").addEventListener("click", function(event){
    copiarAlPortapapeles(this,"correoInfoContacto");
  });
  
  // Copiar correo al portapapeles
  document.getElementById("copiarTelefono").addEventListener("click", function(event){
    copiarAlPortapapeles(this,"telefonoInfoContacto");    
  });

  function copiarAlPortapapeles(icono,id){
    let texto = document.getElementById(id).textContent;
    navigator.clipboard.writeText(texto)
    .then( ()=>{
        icono.classList.remove("bi-clipboard");
        icono.classList.add("bi-check-lg");
        icono.title="Copiado";
        bootstrap.Tooltip.getOrCreateInstance(icono).show();
        restaurarIconoCopiadoAlportapapeles(icono);
      });
  }

  function restaurarIconoCopiadoAlportapapeles(icono){
    setTimeout(function(){
      bootstrap.Tooltip.getInstance(icono).dispose();
      icono.classList.remove("bi-check-lg");
      icono.classList.add("bi-clipboard");        
      icono.title="";
      bootstrap.Tooltip.getOrCreateInstance(icono).dispose();
    },2000);
  }


// ********************************* [ Limpiar ]*******************************
function limpiar(){
  // Elimino la tabla de contactos
  eliminarTablaContactos();
  // Elimino las tarjetas de contactos
  eliminarTarjetasContactos();
  // Creo el loader
  //crearLoaderRing("divContactos");
  // Creo loader con lottie
  crearLoaderLottie("divContactos",LOTTIE_LOADER_CIRCLES,1);
}

// ********************************* [ Mostrar ]*******************************
function mostrar(){
  if(VistaActual == "Tabla") crearTablaContactos();
  if(VistaActual == "Tarjetas") crearTarjetasContactos();
  eliminarLoader();
}

// ********************************* [ Boton para subir al principio de la pagina ]*******************************
 function goUp(){
   document.body.scrollTop = 0;
   document.documentElement.scrollTop = 0;
 }

// ********************************* [ PopOver ]*******************************
  var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
  var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
  return new bootstrap.Popover(popoverTriggerEl)
})

// ********************************* [ ToolTip ]*******************************
//var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
//var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
//  return new bootstrap.Tooltip(tooltipTriggerEl)
//})
</script>